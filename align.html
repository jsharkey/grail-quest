
<style>
body {
margin: 0px;
padding: 0px;
}


</style>


<canvas style="background:red" id="c" width="1000" height="1000"></canvas>
<textarea id="out" style="width:1000; height:200;"></textarea>

<script>
var canvas = document.getElementById('c');
var out = document.getElementById('out');
var context = canvas.getContext('2d');

// 1036,2684
// 2964,2780

var x=2566, y=2873;

/*

on 02.jpg:

var x=3329, y=2917;
var x=706, y=2829;
var x=2057, y=2413;
var x=2566, y=2873;

*/

var frame = -1;

var img = new Image();

function draw() {
    var b = 5;
    xx = (-x * b) + 500;
    yy = (-y * b) + 500;
    ww = img.width * b;
    hh = img.height * b;

    context.drawImage(img, xx, yy, ww, hh);

    context.strokeStyle = 'rgba(0, 255, 0, 0.5)';
    context.beginPath();
    var s = 50;
    context.moveTo(500,500-s);
    context.lineTo(500,500+s);
    context.moveTo(500-s,500);
    context.lineTo(500+s,500);
    context.stroke();
}

img.onload = draw;

function next_frame() {
    frame += 1;
    fr = frame;
    if (fr < 10) fr = "0" + fr;

    out.value = out.value + "\n" + Math.round(x) + "\t" + Math.round(y) + "\t" + img.src;
    img.src = "file:///bandroid/lapse2/stage/"+fr+".jpg";
}

function keyz(e) {
    switch (e.keyCode) {
    case 119: //w
        y--; draw(); break;
    case 97: //a
        x--; draw(); break;
    case 115: //d
        y++; draw(); break;
    case 100: //s
        x++; draw(); break;
    case 32: //space
        next_frame();
        break;
    }

}

function clickz(e) {
    x += (e.clientX - 500) / 5;
    y += (e.clientY - 500) / 5;
    next_frame();
}

window.addEventListener( "keypress", keyz, false );
window.addEventListener( "click", clickz );


</script>

