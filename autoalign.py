

resres = """
    RES 1 675 2838
    RES 2 678 2839
    RES 3 661 2848
    RES 4 680 2832
    RES 5 674 2835
    RES 6 671 2833
    RES 7 678 2835
    RES 8 677 2834
    RES 9 676 2822
    RES 10 662 2838
    RES 11 659 2841
    RES 12 661 2848
    RES 13 659 2841
    RES 14 751 2749
    RES 15 644 2837
    RES 16 640 2846
    RES 17 640 2846
    RES 18 640 2846
    RES 19 670 2841
    RES 20 705 2831
    RES 21 707 2807
    RES 22 703 2818
    RES 23 698 2808
    RES 24 711 2792
    RES 25 704 2801
    RES 26 706 2809
    RES 27 734 2790
    RES 28 684 2830
    RES 29 674 2815
    RES 30 686 2811
    RES 31 665 2823
    RES 32 673 2818
    RES 33 688 2808
    RES 34 694 2807
    RES 35 723 2805
    RES 36 711 2790
    RES 37 710 2791
    RES 38 705 2798
    RES 39 709 2794
    RES 40 687 2793
    RES 41 674 2788
    RES 42 652 2798
    RES 43 648 2801
    RES 44 656 2798
    RES 45 670 2804
    RES 46 709 2785
    RES 47 736 2788
    RES 48 740 2780
    RES 49 739 2767
    RES 50 731 2763
    RES 51 731 2761
    RES 52 732 2772
    RES 53 725 2767
    RES 54 721 2741
    RES 55 694 2787
    RES 56 717 2785
    RES 57 716 2781
    RES 58 733 2786
    RES 59 734 2769
    RES 60 748 2756
    RES 61 741 2751
    RES 62 717 2770
    RES 63 719 2754
    RES 64 696 2759
    RES 65 694 2782
    RES 66 701 2772
    RES 67 700 2761
    RES 68 725 2765
    RES 69 735 2771
    RES 70 726 2760
    RES 71 740 2766
    RES 72 740 2755
    RES 73 724 2747
    RES 74 696 2750
    RES 75 667 2779
    RES 76 677 2767
    RES 77 684 2774
    RES 78 692 2762
    RES 79 719 2756
    RES 80 715 2764
    RES 81 724 2752
    RES 82 713 2729
    RES 83 752 2751
    RES 84 740 2768
    RES 85 717 2780
    RES 86 715 2777
    RES 87 707 2778
    RES 88 720 2769
    RES 89 733 2780
    RES 90 744 2757
    RES 91 744 2755
    RES 92 737 2754
    RES 93 728 2752
    RES 94 721 2750
    RES 95 721 2754
    RES 96 711 2751
    RES 97 729 2749
    RES 98 727 2745
    RES 99 717 2728
    RES 100 711 2766
    RES 101 689 2769
    RES 102 698 2763
    RES 103 720 2745
    RES 104 727 2761
    RES 105 738 2745
    RES 106 732 2744
    RES 107 734 2749
    RES 108 724 2731
    RES 109 710 2747
    RES 110 717 2740
    RES 111 717 2721
    RES 112 718 2761
    RES 113 733 2740
    RES 114 743 2753
    RES 115 742 2745
    RES 116 740 2712
    RES 117 729 2739
    RES 118 720 2733
    RES 119 718 2726
    RES 120 739 2737
    RES 121 735 2736
    RES 122 721 2726
    RES 123 709 2743
    RES 124 707 2727
    RES 125 705 2756
    RES 126 723 2736
    RES 127 746 2737
    RES 128 743 2735
    RES 129 726 2726
    RES 130 697 2718
    RES 131 703 2740
    RES 132 703 2739
    RES 133 699 2724
    RES 134 712 2738
    RES 135 714 2746
    RES 136 742 2728
    RES 137 724 2747
    RES 138 734 2733
    RES 139 726 2738
    RES 140 739 2734
    RES 141 738 2721
    RES 142 699 2735
    RES 143 698 2732
    RES 144 721 2737
    RES 145 715 2725
    RES 146 731 2736
    RES 147 701 2752
    RES 148 711 2754
    RES 149 727 2730
    RES 150 730 2751
    RES 151 732 2745
    RES 152 729 2743
    RES 153 727 2728
    RES 154 724 2727
    RES 155 739 2697
    RES 156 735 2722
    RES 157 733 2727
    RES 158 727 2721
    RES 159 716 2741
    RES 160 729 2745
    RES 161 749 2726
    RES 162 744 2731
    RES 163 736 2723
    RES 164 757 2717
    RES 165 755 2716
    RES 166 735 2729
    RES 167 742 2725
    RES 168 744 2713
    RES 169 736 2717
    RES 170 730 2707
    RES 171 732 2718
    RES 172 714 2733
    RES 173 720 2741
    RES 174 720 2739
    RES 175 742 2721
    RES 176 737 2707
    RES 177 732 2715
    RES 178 724 2703
    RES 179 710 2721
    RES 180 719 2706
    RES 181 725 2707
    RES 182 712 2729
    RES 183 718 2732
    RES 184 726 2729
    RES 185 716 2730
    RES 186 721 2729
    RES 187 721 2721
    RES 188 722 2715
    RES 189 740 2716
    RES 190 735 2714
    RES 191 719 2710
    RES 192 702 2724
    RES 193 699 2731
    RES 194 718 2744
    RES 195 715 2736
    RES 196 740 2728
    RES 197 741 2716
    RES 198 728 2717
    RES 199 727 2686
    RES 200 712 2701
    RES 201 698 2727
    RES 202 708 2739
    RES 203 716 2721
    RES 204 719 2722
    RES 205 731 2729
    RES 206 740 2723
    RES 207 735 2715
    RES 208 741 2709
    RES 209 716 2708
    RES 210 689 2738
    RES 211 698 2729
    RES 212 697 2733
    RES 213 701 2733
    RES 214 692 2736
    RES 215 717 2717
    RES 216 712 2714
    RES 217 702 2712
    RES 218 707 2674
    RES 219 716 2719
    RES 220 699 2724
    RES 221 699 2722
    RES 222 696 2727
    RES 223 709 2726
    RES 224 709 2733
    RES 225 728 2724
    RES 226 732 2722
    RES 227 733 2711
    RES 228 730 2719
    RES 229 747 2706
    RES 230 721 2711
    RES 231 735 2679
    RES 232 735 2704
    RES 233 740 2702
    RES 234 727 2704
    RES 235 728 2705
    RES 236 721 2703
    RES 237 727 2700
    RES 238 721 2701
    RES 239 728 2694
    RES 240 732 2696
    RES 241 734 2692
    RES 242 724 2701
    RES 243 714 2716
    RES 244 733 2717
    RES 245 745 2689
    RES 246 729 2684
    RES 247 735 2695
    RES 248 717 2693
    RES 249 698 2686
    RES 250 683 2706
    RES 251 689 2709
    RES 252 695 2734
    RES 253 722 2721
    RES 254 724 2705
    RES 255 733 2699
    RES 256 719 2705
    RES 257 721 2707
    RES 258 726 2702
    RES 259 730 2697
    RES 260 711 2702
    RES 261 733 2697
    RES 262 725 2680
    RES 263 720 2670
    RES 264 712 2695
    RES 265 748 2691
    RES 266 740 2698
    RES 267 739 2694
    RES 268 739 2691
    RES 269 742 2676
    RES 270 712 2705
    RES 271 717 2704
    RES 272 748 2707
    RES 273 756 2698
    RES 274 754 2703
    RES 275 731 2695
    RES 276 726 2689
    RES 277 709 2702
    RES 278 690 2712
    RES 279 685 2713
    RES 280 704 2721
    RES 281 731 2694
    RES 282 736 2704
    RES 283 738 2699
    RES 284 734 2693
    RES 285 737 2700
    RES 286 735 2680
    RES 287 743 2680
    RES 288 740 2699
    RES 289 741 2695
    RES 290 735 2675
    RES 291 735 2697
    RES 292 748 2675
    RES 293 724 2682
    RES 294 717 2679
    RES 295 683 2697
    RES 296 683 2705
    RES 297 701 2706
    RES 298 714 2713
    RES 299 731 2703
    RES 300 737 2698
    RES 301 738 2676
    RES 302 728 2689
    RES 303 719 2698
    RES 304 682 2710
    RES 305 698 2704
    RES 306 710 2710
    RES 307 727 2700
    RES 308 744 2701
    RES 309 759 2675
    RES 310 736 2689
    RES 311 743 2680
    RES 312 731 2687
    RES 313 703 2682
    RES 314 676 2704
    RES 315 678 2702
    RES 316 692 2716
    RES 317 735 2692
    RES 318 734 2697
    RES 319 730 2696
    RES 320 744 2683
    RES 321 723 2675
    RES 322 708 2682
    RES 323 749 2687
    RES 324 759 2687
    RES 325 748 2690
    RES 326 741 2676
    RES 327 713 2661
    RES 328 693 2702
    RES 329 697 2697
    RES 330 732 2706
    RES 331 743 2691
    RES 332 738 2685
    RES 333 735 2678
    RES 334 742 2686
    RES 335 740 2665
    RES 336 745 2674
    RES 337 734 2685
    RES 338 735 2679
    RES 339 707 2676
    RES 340 689 2689
    RES 341 685 2707
    RES 342 696 2687
    RES 343 681 2715
    RES 344 707 2699
    RES 345 694 2701
    RES 346 674 2693
    RES 347 688 2682
    RES 348 714 2684
    RES 349 689 2704
    RES 350 670 2713
    RES 351 697 2684
    RES 352 700 2700
    RES 353 712 2689
    RES 354 722 2703
    RES 355 740 2681
    RES 356 717 2666
    RES 357 712 2680
    RES 358 698 2666
    RES 359 685 2686
    RES 360 679 2704
    RES 361 714 2698
    RES 362 704 2685
    RES 363 687 2696
    RES 364 688 2679
    RES 365 717 2694
    RES 366 713 2687
    RES 367 709 2675
    RES 368 683 2681
    RES 369 689 2684
    RES 370 702 2696
    RES 371 719 2696
    RES 372 730 2696
    RES 373 744 2673
    RES 374 736 2686
    RES 375 739 2689
    RES 376 727 2671
    RES 377 697 2679
    RES 378 673 2688
    RES 379 674 2677
    RES 380 663 2698
    RES 381 678 2703
    RES 382 711 2690
    RES 383 742 2673
    RES 384 710 2682
    RES 385 687 2698
    RES 386 702 2679
    RES 387 673 2700
    RES 388 684 2672
    RES 389 697 2685
    RES 390 727 2665
    RES 391 713 2673
    RES 392 713 2674
    RES 393 723 2661
    RES 394 720 2652
    RES 395 715 2644
    RES 396 669 2687
    RES 397 697 2666
    RES 398 664 2690
    RES 399 705 2698
    RES 400 700 2711
    RES 401 706 2698
    RES 402 744 2662
    RES 403 715 2679
    RES 404 701 2670
    RES 405 677 2658
    RES 406 679 2675
    RES 407 683 2693
    RES 408 691 2679
    RES 409 711 2685
    RES 410 725 2655
    RES 411 707 2672
    RES 412 708 2678
    RES 413 730 2679
    RES 414 736 2659
    RES 415 733 2670
    RES 416 723 2656
    RES 417 711 2638
    RES 418 717 2659
    RES 419 690 2653
    RES 420 698 2678
    RES 421 686 2682
    RES 422 693 2684
    RES 423 693 2679
    RES 424 690 2676
    RES 425 707 2684
    RES 426 736 2669
    RES 427 728 2666
    RES 428 719 2658
    RES 429 712 2662
    RES 430 701 2657
    RES 431 688 2654
    RES 432 659 2654
    RES 433 665 2662
    RES 434 692 2667
    RES 435 727 2644
    RES 436 739 2655
    RES 437 723 2654
    RES 438 726 2658
    RES 439 732 2646
    RES 440 703 2641
    RES 441 679 2672
    RES 442 658 2681
    RES 443 668 2669
    RES 444 669 2666
    RES 445 688 2658
    RES 446 685 2669
    RES 447 687 2649
    RES 448 706 2638
    RES 449 707 2640
    RES 450 715 2626
    RES 451 730 2650
    RES 452 734 2653
    RES 453 737 2645
    RES 454 707 2671
    RES 455 690 2671
    RES 456 725 2647
    RES 457 734 2651
    RES 458 750 2651
    RES 459 738 2658
    RES 460 724 2660
    RES 461 746 2646
    RES 462 761 2617
    RES 463 720 2663
    RES 464 723 2665
    RES 465 730 2649
    RES 466 739 2639
    RES 467 725 2634
    RES 468 735 2644
    RES 469 735 2640
    RES 470 747 2620
    RES 471 732 2637
    RES 472 714 2651
    RES 473 690 2636
    RES 474 711 2643
    RES 475 702 2656
    RES 476 687 2661
    RES 477 700 2641
    RES 478 711 2640
    RES 479 711 2648
    RES 480 685 2651
    RES 481 731 2664
    RES 482 747 2645
    RES 483 740 2643
    RES 484 728 2647
    RES 485 716 2651
    RES 486 745 2632
    RES 487 720 2641
    RES 488 732 2637
    RES 489 701 2664
    RES 490 733 2651
    RES 491 735 2652
    RES 492 729 2644
    RES 493 731 2646
    RES 494 732 2653
    RES 495 732 2647
    RES 496 725 2646
    RES 497 733 2635
    RES 498 738 2633
    RES 499 731 2625
    RES 500 727 2632
    RES 501 717 2632
    RES 502 721 2622
    RES 503 708 2617
    RES 504 684 2641
    RES 505 662 2638
    RES 506 700 2671
    RES 507 722 2650
    RES 508 718 2644
    RES 509 715 2644
    RES 510 713 2652
    RES 511 715 2637
    RES 512 717 2636
    RES 513 717 2643
    RES 514 715 2634
    RES 515 714 2619
    RES 516 708 2644
    RES 517 712 2632
    RES 518 706 2620
    RES 519 666 2662
    RES 520 696 2653
    RES 521 706 2655
    RES 522 720 2639
    RES 523 719 2644
    RES 524 720 2636
    RES 525 727 2643
    RES 526 725 2615
    RES 527 721 2604
    RES 528 716 2626
    RES 529 713 2625
    RES 530 693 2651
    RES 531 732 2620
    RES 532 722 2631
    RES 533 726 2632
    RES 534 723 2631
    RES 535 711 2639
    RES 536 723 2622
    RES 537 709 2620
    RES 538 700 2635
    RES 539 726 2645
    RES 540 718 2655
    RES 541 719 2638
    RES 542 712 2629
    RES 543 711 2633
    RES 544 706 2625
    RES 545 700 2638
    RES 546 679 2652
    RES 547 695 2649
    RES 548 713 2627
    RES 549 724 2626
    RES 550 714 2636
    RES 551 728 2622
    RES 552 727 2627
    RES 553 701 2614
    RES 554 688 2622
    RES 555 685 2617
    RES 556 684 2624
    RES 557 724 2629
    RES 558 727 2626
    RES 559 718 2627
    RES 560 719 2614
    RES 561 717 2621
    RES 562 716 2602
    RES 563 720 2618
    RES 564 716 2618
    RES 565 716 2616
    RES 566 716 2622
    RES 567 712 2621
    RES 568 693 2605
    RES 569 707 2636
    RES 570 725 2600
    RES 571 722 2609
    RES 572 724 2614
    RES 573 720 2612
    RES 574 724 2618
    RES 575 712 2616
    RES 576 718 2610
    RES 577 709 2614
    RES 578 705 2605
    RES 579 701 2611
    RES 580 676 2609
    RES 581 711 2612
    RES 582 699 2631
    RES 583 703 2621
    RES 584 696 2616
    RES 585 710 2633
    RES 586 718 2633
    RES 587 715 2623
    RES 588 727 2625
    RES 589 723 2608
    RES 590 735 2610
    RES 591 725 2605
    RES 592 729 2607
    RES 593 742 2597
    RES 594 737 2596
    RES 595 738 2593
    RES 596 729 2594
    RES 597 729 2585
    RES 598 705 2612
    RES 599 688 2607
    RES 600 660 2627
    RES 601 675 2623
    RES 602 692 2610
    RES 603 706 2639
    RES 604 685 2660
    RES 605 706 2624
    RES 606 762 2592
    RES 607 779 2564
    RES 608 736 2587
    RES 609 737 2583
    RES 610 718 2598
    RES 611 709 2609
    RES 612 677 2592
    RES 613 674 2618
    RES 614 705 2615
    RES 615 710 2589
    RES 616 716 2602
    RES 617 697 2605
    RES 618 719 2601
    RES 619 710 2602
    RES 620 687 2607
    RES 621 689 2590
    RES 622 672 2603
    RES 623 676 2589
    RES 624 683 2598
    RES 625 697 2594
    RES 626 688 2600
    RES 627 721 2603
    RES 628 727 2600
    RES 629 733 2603
    RES 630 720 2591
    RES 631 725 2596
    RES 632 718 2598
    RES 633 723 2586
    RES 634 714 2586
    RES 635 714 2597
    RES 636 699 2588
    RES 637 677 2597
    RES 638 675 2605
    RES 639 684 2608
    RES 640 713 2605
    RES 641 708 2586
    RES 642 726 2575
    RES 643 720 2577
    RES 644 713 2574
    RES 645 705 2574
    RES 646 689 2584
    RES 647 667 2586
    RES 648 666 2584
    RES 649 644 2603
    RES 650 655 2606
    RES 651 678 2607
    RES 652 694 2599
    RES 653 710 2599
    RES 654 716 2583
    RES 655 716 2568
    RES 656 712 2558
    RES 657 707 2578
    RES 658 707 2577
    RES 659 694 2571
    RES 660 664 2582
    RES 661 652 2577
    RES 662 652 2575
    RES 663 661 2604
    RES 664 678 2609
    RES 665 730 2579
    RES 666 724 2573
    RES 667 720 2581
    RES 668 717 2576
    RES 669 706 2574
    RES 670 693 2576
    RES 671 678 2580
    RES 672 676 2578
    RES 673 675 2593
    RES 674 683 2588
    RES 675 705 2581
    RES 676 703 2575
    RES 677 707 2573
    RES 678 708 2550
    RES 679 696 2554
    RES 680 699 2556
    RES 681 700 2544
    RES 682 673 2546
    RES 683 681 2562
    RES 684 661 2579
    RES 685 669 2591
    RES 686 694 2584
    RES 687 716 2580
    RES 688 726 2570
    RES 689 724 2572
    RES 690 710 2559
    RES 691 686 2551
    RES 692 670 2572
    RES 693 676 2570
    RES 694 675 2564
    RES 695 682 2576
    RES 696 706 2561
    RES 697 701 2572
    RES 698 718 2556
    RES 699 723 2550
    RES 700 744 2539
    RES 701 740 2550
    RES 702 719 2556
    RES 703 709 2573
    RES 704 687 2578
    RES 705 671 2570
    RES 706 662 2568
    RES 707 705 2556
    RES 708 751 2537
    RES 709 764 2517
    RES 710 748 2521
    RES 711 726 2533
    RES 712 706 2534
    RES 713 698 2554
    RES 714 707 2571
    RES 715 734 2562
    RES 716 737 2553
    RES 717 762 2562
    RES 718 744 2547
    RES 719 707 2534
    RES 720 686 2524
    RES 721 684 2519
    RES 722 680 2524
    RES 723 661 2534
    RES 724 678 2539
    RES 725 719 2534
    RES 726 743 2546
    RES 727 759 2541
    RES 728 759 2510
    RES 729 747 2520
    RES 730 748 2507
    RES 731 740 2494
    RES 732 726 2514
    RES 733 708 2513
    RES 734 725 2505
    RES 735 726 2510
    RES 736 724 2538
    RES 737 738 2508
    RES 738 739 2504
    RES 739 753 2497
    RES 740 742 2481
    RES 741 737 2494
    RES 742 695 2511
    RES 743 678 2518
    RES 744 676 2523
    RES 745 646 2541
    RES 746 665 2561
    RES 747 659 2550
    RES 748 671 2564
    RES 749 699 2533
    RES 750 663 2549
    RES 751 670 2521
    RES 752 676 2503
    RES 753 680 2484
    RES 754 665 2497
    RES 755 685 2495
    RES 756 693 2494
    RES 757 666 2496
    RES 758 679 2501
    RES 759 677 2512
"""

parsed = {}

for line in resres.split("\n"):
    if "RES" not in line: continue
    res, fr, x, y = line.strip().split(" ")
    parsed[int(fr)] = (int(x),int(y))


#px = 3307; py = 2934
#px = 675; py = 2834
parsed[0] = (675,2834)

for i in range(170,930):
    j=i-170
    x, y = parsed[j]
    x-=400; y-=600
    print "convert /home/jsharkey/vacat/DCIM/101EOS5D/R59A%04d.JPG -crop 800x800+%d+%d B2_%04d.JPG" % (i, x, y, j)

exit()





import numpy as np
import scipy.signal

def cross_image(im1, im2):
   # get rid of the color channels by performing a grayscale transform
   # the type cast into 'float' is to avoid overflows
   #im1_gray = np.sum(im1.astype('float'), axis=2)
   #im2_gray = np.sum(im2.astype('float'), axis=2)
   im1_gray = im1
   im2_gray = im2

   # get rid of the averages, otherwise the results are not good
   im1_gray -= np.mean(im1_gray)
   im2_gray -= np.mean(im2_gray)

   # calculate the correlation image; note the flipping of onw of the images
   return scipy.signal.fftconvolve(im1_gray, im2_gray[::-1,::-1], mode='same')


for i in range(180,930,10):
    # this is how much to shift compared to previous image
    a = scipy.ndimage.imread("data/A_%04d.JPG" % (i-10), flatten=True)
    b = scipy.ndimage.imread("data/A_%04d.JPG" % (i), flatten=True)
    c = cross_image(a, b)
    scipy.misc.imsave("data/delta_%04d.png" % (i), c)
    x,y = np.unravel_index(np.argmax(c), c.shape)
    x-=200; y-=200
    px+=x; py+=y;
    print (i-170), (px), (py)


# 1048 +/- 200
# 2681 +/- 200
